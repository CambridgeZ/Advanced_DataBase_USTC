SA24225464 赵建桥

# Homework2

1.
(1)
由7200RPM 则可以得到 ，旋转一圈需要的时间为8.33ms， $平均旋转延迟R \approx 4.17ms$
平均寻道时间为 5ms

由于一个磁道大小为64MB，而一个磁盘块的大小为16KB，则读取一个磁盘需要的时间需要$8.33ms \times \frac{16KB}{64MB} \approx 0.002ms$

则可以得到需要的平均时间为 = 寻道时间 + 旋转延迟 + 传输时间 = 5ms + 4.17ms + 0.002ms $\approx$ 9.2ms

(2)

读取1000个连续的磁盘块需要的读取时间大约为2ms

+ 需要最少的时间都时候，寻道时间为0ms，旋转延迟为0ms，传输需要的时间2.0ms，因此总共需要2.0ms
+ 需要最多时间的时候，寻道时间需要20ms，旋转延迟8.3ms，传输需要时间为2.0ms，总共需要30.3ms
+ 平均情况下，寻道时间为5ms,旋转延迟为4.2ms，传输需要的时间为2m上，总共需要11.2ms

------------------

2.

**（1）固定磁盘块大小 vs. 可变磁盘块大小的优缺点**

**固定磁盘块大小**
优点：
+	**简单性**：系统设计简单，管理起来比较容易。固定块大小的存储管理系统只需处理一种大小的块，简化了实现和调度策略。
+	**性能稳定**：由于块大小固定，操作系统在管理和缓存数据时，可以更有效地预测 I/O 操作，从而优化读取和写入性能。
+	**兼容性强**：一些存储设备和文件系统设计是围绕特定块大小的，固定大小更容易与之匹配，从而最大化性能。

缺点：
+	**灵活性不足**：对于不同大小的表或者索引数据，可能会出现空间浪费或者存储效率不高的情况。例如，大表可能受限于小块的写入效率，而小表可能浪费大块的存储空间。
+	**碎片化**：数据更新、插入和删除频繁时，可能会引发更严重的磁盘碎片问题，进而影响性能。

**可变磁盘块大小**
优点：
+	**灵活性高**：能够根据数据的具体情况选择合适的块大小，减少空间浪费，提升存储效率。特别适用于数据量和访问模式差异较大的场景。
+	**优化性能**：对于大表或大数据量的应用，可以使用更大的块来减少 I/O 次数，从而提升读写性能。对于小表和频繁更新的数据，则可以使用较小的块来避免不必要的磁盘浪费。
缺点：
+	**管理复杂**：存储管理和分配更为复杂，数据库系统需要处理不同大小的块，调度和缓存的复杂性增加。
+	**性能不确定**：不同大小的块混用时，可能会带来不可预测的性能问题，特别是当数据访问模式变化时。



**（2）流行关系型 DBMS 不采用 64MB 以上的大块设计的原因**
+	**随机访问不高效**：大块设计会影响数据的随机访问。关系型数据库通常需要处理大量随机的读写操作，特别是在事务型系统中。如果每个 I/O 操作需要读取或写入64MB的数据，那么即使是小量的数据更新，也需要进行大量不必要的数据传输，从而导致性能下降。
+	**内存和缓存的浪费**：大块会占用更多内存和缓存资源。即使仅仅需要从某个大块中读取一小部分数据，整个块仍然需要加载到内存中，这会大幅消耗内存空间，增加缓存污染，进而降低整体系统性能。
+	**I/O 开销大**：对于 OLTP（联机事务处理）系统来说，事务往往只涉及少量数据块，使用64MB大块会导致I/O操作的开销非常高，从而影响系统吞吐量。
+	**写入放大效应**：大块设计可能导致写入操作时的写入放大效应。例如，更新一个小数据时，可能需要重写整个大块的数据，这会增加磁盘的写入压力。



**（3）适合采用 64MB 大块设计的数据库应用场景**

**数据仓库和大数据分析系统**：在这些系统中，数据访问通常是批量的，顺序读写占主导地位。数据仓库系统往往涉及大规模的扫描操作，系统倾向于一次性读取或写入大量的数据块，这种情况下，使用较大的块大小（如64MB）能够减少I/O操作次数，提升性能。例如，Hadoop 的 HDFS 默认块大小为 64MB，就是为了优化大数据分析中的顺序读取性能。

**例子**：一个典型的例子是 **Hadoop**，它用于处理和存储大规模的非结构化数据。由于这些应用大多是批量处理（如MapReduce作业），采用大块设计可以极大地减少I/O操作，并提高读取吞吐量。同样的，像 **Spark SQL** 或 **Amazon Redshift** 这样的数据分析平台也可以从大块设计中受益。

因此，64MB 大块设计更适合那些需要频繁进行大数据批处理、顺序读取的场景，而在 OLTP 或混合工作负载的关系型 DBMS 中，较小的块大小则能更好地适应高频率的随机访问需求。
